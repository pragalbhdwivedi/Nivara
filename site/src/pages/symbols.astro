---
import BaseLayout from "../layouts/BaseLayout.astro";
import CanonMarkdown from "../components/CanonMarkdown.astro";
import ThreeIsland from "../components/ThreeIsland.astro";
import SigilScene from "../components/three/SigilScene.tsx";
import { getCollection } from "astro:content";

const symbols = await getCollection("symbols");
const symbolsDoc = symbols.find((page) => page.id === "SYMBOLS_AND_SIGILS");

if (!symbolsDoc) {
  throw new Error("Missing symbols markdown.");
}

const { Content } = await symbolsDoc.render();
---

<BaseLayout title="Nivara | Symbols">
  <section>
    <h1>Symbols</h1>
  </section>

  <CanonMarkdown>
    <Content />
  </CanonMarkdown>

  <ThreeIsland
    title="Sigil Rotation"
    description="A ritual glyph placeholder that will later map to factions and rites."
    componentName="SigilScene"
  >
    <SigilScene client:only="react" />
  </ThreeIsland>
</BaseLayout>
