---
import BaseLayout from "../layouts/BaseLayout.astro";
import ScrollLanternIsland from "../components/ScrollLanternIsland.astro";
import SigilOverlay from "../components/SigilOverlay.astro";
import { getCanonNavigation } from "../utils/canon.js";
import { withBase } from "../utils/paths";

const links = await getCanonNavigation();
---

<BaseLayout title="Nivara | Canon Archive" namespace="home">
  <SigilOverlay enabled={true} />
  <section>
    <h1>Canon Archive</h1>
    <p>Browse the indexed Nivara canon below. Only pages linked in the world bible indexes are shown.</p>
  </section>

  <ScrollLanternIsland />

  <section>
    <h2>Navigate the archive</h2>
    <div class="grid">
      {links.map((link) => (
        <a href={withBase(link.route)}>{link.label}</a>
      ))}
    </div>
  </section>

  <style>
    .grid {
      display: grid;
      gap: 0.75rem;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    }

    .grid a {
      padding: 0.75rem 1rem;
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 12px;
      background: rgba(12, 14, 24, 0.6);
      color: #d8dbee;
      transition: transform 0.2s ease, border-color 0.2s ease;
    }

    .grid a:hover,
    .grid a:focus {
      transform: translateY(-2px);
      border-color: rgba(140, 170, 255, 0.7);
    }
  </style>
</BaseLayout>
