---
import BaseLayout from "../layouts/BaseLayout.astro";
import CanonMarkdown from "../components/CanonMarkdown.astro";
import { getCollection } from "astro:content";

const pages = await getCollection("nivara_pages");
const worldOverview = pages.find((page) => page.id === "01_WORLD_OVERVIEW");
const corePremise = pages.find((page) => page.id === "02_CORE_PREMISE");

if (!worldOverview || !corePremise) {
  throw new Error("Missing world overview or core premise markdown.");
}

const { Content: WorldOverview } = await worldOverview.render();
const { Content: CorePremise } = await corePremise.render();
---

<BaseLayout title="Nivara | World" namespace="world">
  <section>
    <h1>World</h1>
  </section>

  <CanonMarkdown>
    <WorldOverview />
  </CanonMarkdown>

  <CanonMarkdown>
    <CorePremise />
  </CanonMarkdown>
</BaseLayout>
